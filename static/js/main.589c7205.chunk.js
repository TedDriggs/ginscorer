(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){},,,,function(e,t,n){e.exports=n(66)},,,,,,,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var s=n(0),a=n(4),i=n(1),r=n.n(i),c=n(3),o=n(10),l=n(5);n(29);const d=e=>{const[t,n]=j(e),[s,a]=j(e,1,[n]),[i]=j(e,2,[n,a]);return[t,s,i]},b=e=>Boolean(e.finalResult),j=(e,t=0,n=[])=>{const s={[h.One]:-1*t,[h.Two]:-1*t},a={[h.One]:0,[h.Two]:0},i=[],r=[];n.reverse();let c=n.pop();for(const[o,l]of e.entries()){if("number"===typeof c&&o>=c+1&&(s[h.One]=Math.max(-1*n.length,s[h.One]),s[h.Two]=Math.max(-1*n.length,s[h.Two]),c=n.pop()),s[l.winner]+=1,s[l.winner]<=0)continue;a[l.winner]+=l.points;const e=a[l.winner];if(i.push(Object.assign(Object.assign({},l),{runningTotal:e})),e>=100){r.push({player:l.winner,points:100,label:"Going out"}),p.forEach(e=>{s[e]>0&&r.push({player:e,points:10*s[e],label:"Wins"})}),p.forEach(e=>{const t=i.filter(v(e)).reduce((e,t)=>e+O(t.gin),0);t&&r.push({player:e,points:t,label:"Gins"})}),s[h.Two]<=0&&r.push({player:h.One,points:e+r.filter(e=>e.player===h.One).reduce((e,{points:t})=>e+t,0),label:"Blitz"}),s[h.One]<=0&&r.push({player:h.Two,points:e+r.filter(e=>e.player===h.Two).reduce((e,{points:t})=>e+t,0),label:"Blitz"}),a[h.One]+=r.filter(e=>e.player===h.One).reduce((e,{points:t})=>e+t,0),a[h.Two]+=r.filter(e=>e.player===h.Two).reduce((e,{points:t})=>e+t,0);const t={winner:u(a),points:Math.abs(a[h.One]-a[h.Two])};return[{bonuses:r,finalResult:t,games:i},o]}}return[{bonuses:r,currentScores:a,games:i},void 0]},u=e=>e[h.One]>e[h.Two]?h.One:h.Two,O=e=>{switch(e){case y.None:return 0;case y.Normal:return 25;case y.Super:return 50}},v=e=>t=>t.winner===e,m=(e,t)=>{const n={[h.One]:0,[h.Two]:0};e.forEach(e=>n[e.finalResult.winner]+=e.finalResult.points);const s=u(n),a=t.every(v(s));return{winner:s,isHollywood:a,points:a?2*n[s]:n[s]-n[f(s)]}};var h;!function(e){e[e.One=1]="One",e[e.Two=2]="Two"}(h||(h={}));const p=[h.One,h.Two],g=(e,t)=>t===h.One?e.player1Name:e.player2Name,f=e=>e===h.One?h.Two:h.One;var y;!function(e){e.None="none",e.Normal="normal",e.Super="super"}(y||(y={}));const w=e=>null!==e.winner&&"object"===typeof e&&"number"===typeof e.points&&"string"===typeof e.gin&&void 0!==e.winner,x=e=>{switch(e.version){case 2:return e;case 1:return C(e);default:throw new _(e)}};class N extends Error{constructor(e,t){super(e),this.state=t}}class _ extends N{constructor(e){super(`Unknown state version '${e.version}'`,e),this.version=e.version}}const S={version:2,player1Name:"Player 1",player2Name:"Player 2",games:[],initialDealer:h.One},C=e=>Object.assign(Object.assign({},e),{version:2,initialDealer:h.One}),T=e=>(window.localStorage.setItem("reduxState",JSON.stringify(e)),Promise.resolve());n(31);const P=()=>Object(s.jsx)("header",Object.assign({className:"c-app-header"},{children:Object(s.jsx)("h1",{children:"Gin Scorer"},void 0)}),void 0);var k=n(2),E=n.n(k);const R=e=>{e.stopPropagation(),e.preventDefault()};n(33);var D=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n};const G=Object(i.forwardRef)((e,t)=>{var{primary:n}=e,a=D(e,["primary"]);return Object(s.jsx)("button",Object.assign({},a,{ref:t,className:E()("c-button",n&&"c-button--primary",a.className),onClick:e=>{!e.button&&a.onClick&&(R(e),a.confirmation&&!window.confirm(a.confirmation)||a.onClick())}}),void 0)}),M={UndoGame:()=>({type:"UndoGame"}),RenamePlayers:e=>Object.assign(Object.assign({},e),{type:"RenamePlayers"}),FinishGame:e=>({type:"FinishGame",result:e}),StartNewMatch:()=>({type:"StartNewMatch"}),SetInitialDealer:e=>({type:"SetInitialDealer",dealer:e})};var F=n(69),I=n(67),U=n(16);const W=e=>{var t;null===(t=e.current)||void 0===t||t.focus()},L=e=>()=>{var t,n;return null!==(n=null===(t=e.current)||void 0===t?void 0:t.contains(document.activeElement))&&void 0!==n&&n};n(35);const B=e=>{const t=Object(i.useRef)(null),n=Object(i.useRef)(null);return Object(i.useLayoutEffect)(()=>{var e;if(!n.current)return;if("standalone"in navigator&&navigator.standalone)return;const{bottom:s}=n.current.getBoundingClientRect(),a=Math.max(0,s-window.innerHeight);null===(e=t.current)||void 0===e||e.style.setProperty("--safari-correction",`${a}px`)},[window.innerHeight]),Object(a.createPortal)(Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(F.a,Object.assign({in:e.open,timeout:125,classNames:"c-drawer__backdrop",appear:!0,mountOnEnter:!0,unmountOnExit:!0},{children:Object(s.jsx)("div",{onClick:t=>{var n;0===t.button&&(null===(n=e.onDismiss)||void 0===n||n.call(e))},className:"c-drawer__backdrop"},void 0)}),void 0),Object(s.jsx)(F.a,Object.assign({in:e.open,classNames:"c-drawer",timeout:125,onExit:()=>W(n),onEntered:e.onEntered,appear:!0},{children:Object(s.jsxs)("div",Object.assign({ref:t,className:E()("c-drawer",{"c-drawer--has-title":Boolean(e.title)&&!e.hideTitle}),onKeyDown:t=>{t.key===U.a.Escape&&e.onDismiss&&(R(t),e.onDismiss())},role:"dialog"},{children:[e.title&&Object(s.jsx)(G,Object.assign({ref:n,className:"c-drawer__title",onClick:e.onTitleClick},{children:Object(s.jsx)("span",Object.assign({className:"c-drawer__title__text"},{children:e.title}),void 0)}),void 0),Object(s.jsx)(I.a,Object.assign({in:e.open,timeout:125,appear:!0,mountOnEnter:!0,unmountOnExit:!0},{children:e.children}),void 0)]}),void 0)}),void 0)]},void 0),document.body)},z=()=>Object(s.jsx)("div",{className:"c-drawer-title-placeholder"},void 0),A=({activator:e,children:t})=>{const[n,a]=Object(i.useState)(!1);return Object(s.jsxs)(s.Fragment,{children:[e({openDrawer:()=>a(!0)}),Object(s.jsx)(B,Object.assign({open:n,onDismiss:()=>a(!1)},{children:t}),void 0)]},void 0)},X=e=>Object(s.jsxs)("form",Object.assign({style:e.style,className:e.className,onSubmit:t=>{R(t),e.disableSubmit||e.onSubmit()}},{children:[e.children,e.submitLabel&&Object(s.jsx)(G,Object.assign({primary:!0,disabled:e.disableSubmit,type:"submit"},{children:e.submitLabel}),void 0)]}),void 0),J=e=>(t,n)=>{const{value:s,onChange:a,disabled:i,name:r}=e.props;i||a&&a(Object.assign(Object.assign({},s),{[n]:t}),r)};n(15);const $=Object(i.forwardRef)((e,t)=>Object(s.jsx)("input",Object.assign({ref:t},e,{className:E()("c-base-input",e.className)}),void 0));var H=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n};const V=Object(i.forwardRef)((e,t)=>{var{onChange:n,label:a,className:i}=e,r=H(e,["onChange","label","className"]);return Object(s.jsxs)("label",Object.assign({className:E()("c-input",i)},{children:[a&&Object(s.jsx)("div",Object.assign({className:"c-input-label"},{children:a}),void 0),Object(s.jsx)($,Object.assign({},r,{ref:t,onChange:e=>n(e.target.value,r.name)}),void 0)]}),void 0)});var q=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n};const Y=e=>{const{value:t,className:n}=e,a=q(e,["value","className"]);return Object(s.jsx)($,Object.assign({},a,{className:E()("c-number-input",n),type:"number",value:null!==t?t.toString():"",onChange:t=>{e.onChange(K(t.target.value),e.name)}}),void 0)},K=e=>""===e?null:Number.parseInt(e,10);n(40);class Q extends i.Component{constructor(){super(...arguments),this.handleChange=J(this),this.focusTarget=Object(i.createRef)(),this.focus=(()=>W(this.focusTarget))}render(){const{value:e,disabled:t}=this.props;return Object(s.jsxs)("div",Object.assign({className:"c-players-input"},{children:[Object(s.jsx)(V,{ref:this.focusTarget,label:"Player 1",name:"player1Name",value:e.player1Name,disabled:t,onChange:this.handleChange,required:!0,maxLength:15},void 0),Object(s.jsx)(V,{label:"Player 2",name:"player2Name",value:e.player2Name,disabled:t,onChange:this.handleChange,required:!0,maxLength:15},void 0)]}),void 0)}}const Z=e=>{const[t,n]=Object(i.useState)(!1),[a,r]=Object(i.useState)(void 0),c=Object(i.useRef)(null),o=Object(i.useRef)(null),l=()=>{var e;n(!1),r(void 0),null===(e=c.current)||void 0===e||e.focus()};return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(G,Object.assign({ref:c,onClick:()=>n(!0)},{children:"Rename Players"}),void 0),Object(s.jsx)(B,Object.assign({title:t?"Rename Players":void 0,open:t,onDismiss:l,onEntered:()=>{var e;return null===(e=o.current)||void 0===e?void 0:e.focus()}},{children:Object(s.jsxs)(X,Object.assign({style:{marginLeft:10,marginRight:10,maxWidth:"30em",display:"flex",flexDirection:"column"},onSubmit:()=>{a&&(e.onSubmit(a),l())}},{children:[Object(s.jsx)(Q,{ref:o,value:null!==a&&void 0!==a?a:e.defaultValue,onChange:e=>r(e)},void 0),Object(s.jsx)("div",{style:{height:20}},void 0),Object(s.jsx)(G,Object.assign({primary:!0,type:"submit"},{children:"Update"}),void 0)]}),void 0)}),void 0)]},void 0)},ee=({player1Name:e,player2Name:t})=>({player1Name:e,player2Name:t}),te=({games:e})=>Boolean(e.length),ne=({games:e,initialDealer:t})=>e.length%2===0?t:f(t),se=e=>Boolean(e.games.length),ae=e=>Object(l.c)(e,l.a.run(T,{args:[e]})),ie={onStartNewMatch:M.StartNewMatch,onRenamePlayers:M.RenamePlayers,onUndoGame:M.UndoGame},re=Object(c.b)(e=>({playerNames:ee(e),canUndo:te(e),hasMatchStarted:se(e)}),ie)(e=>Object(s.jsxs)("div",Object.assign({className:"c-command-bar"},{children:[Object(s.jsx)(G,Object.assign({onClick:e.onUndoGame,disabled:!e.canUndo},{children:"Undo Last Game"}),void 0),Object(s.jsx)(G,Object.assign({onClick:e.onStartNewMatch,disabled:!e.hasMatchStarted,confirmation:"Are you sure you want to start a new match?"},{children:"New Match"}),void 0),Object(s.jsx)(Z,{defaultValue:e.playerNames,onSubmit:e.onRenamePlayers},void 0)]}),void 0));var ce=n(17),oe=n(6),le=n.n(oe);const de=()=>({[h.One]:0,[h.Two]:0}),be=e=>e.reduce((e,t)=>(e[t.winner]+=1,e),de()),je=(e,t)=>{const n=e.reduce((e,t)=>(e[t.winner]+=t.points,e),de());return t[h.One]&&(n[h.One]/=t[h.One]),t[h.Two]&&(n[h.Two]/=t[h.Two]),n},ue=e=>{const t=de(),n=de();for(const s of e)t[s.winner]+=1,t[f(s.winner)]=0,t[s.winner]>n[s.winner]&&(n[s.winner]=t[s.winner]);return n},Oe=e=>e.reduce((e,t)=>(e[t.winner]=Math.max(e[t.winner],t.points),e),de()),ve=e=>e.reduce((e,t)=>(t.gin!==y.None&&(e[t.winner][t.gin]+=1),e),{[h.One]:{[y.Normal]:0,[y.Super]:0},[h.Two]:{[y.Normal]:0,[y.Super]:0}});n(42);var me=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n};class he extends i.Component{constructor(){super(...arguments),this.root=Object(i.createRef)(),this.hasFocus=L(this.root),this.focus=(()=>W(this.root)),this.handleFocusChange=(()=>this.forceUpdate()),this.handleChange=(()=>{var e,t;null===(t=(e=this.props).onChange)||void 0===t||t.call(e,this.props.value,this.props.name)})}render(){const e=this.props,{className:t,children:n,value:a,label:i}=e,r=me(e,["className","children","value","label"]);return Object(s.jsxs)("label",Object.assign({ref:this.root,className:E()("c-radio",t,{"c-radio--checked":r.selected,"c-radio--disabled":r.disabled,"c-radio--nonative":r.hideNative,"c-radio--has-focus":this.hasFocus()})},{children:[Object(s.jsx)("input",{name:r.name,disabled:r.disabled,checked:r.selected,onChange:this.handleChange,value:a.toString(),type:"radio",onFocus:this.handleFocusChange,onBlur:this.handleFocusChange},void 0),i]}),void 0)}}n(44);var pe=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n};class ge extends r.a.Component{constructor(){super(...arguments),this.first=r.a.createRef(),this.focus=(()=>W(this.first))}render(){const e=this.props,{className:t,name:n}=e,a=pe(e,["className","name"]);return Object(s.jsxs)("div",Object.assign({className:E()("c-radio-group",t,{"c-radio-group--horizontal":a.horizontal,"c-radio-group--hide-native":a.hideNative})},{children:[a.label&&Object(s.jsx)("span",Object.assign({className:"c-radio-group__label"},{children:a.label}),void 0),a.choices.map((e,t)=>Object(i.createElement)(he,Object.assign({},e,{key:e.value,ref:0===t?this.first:void 0,name:n,disabled:a.disabled,hideNative:a.hideNative,selected:a.value===e.value,onChange:a.onChange})))]}),void 0)}}n(46);var fe=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n};const ye={DEFAULT:{winner:h.One,points:null,gin:y.None}};class we extends i.Component{constructor(){super(...arguments),this.focusTarget=Object(i.createRef)(),this.handleChange=J(this),this.focus=(()=>W(this.focusTarget))}render(){const e=this.props,{value:t,disabled:n}=e,a=fe(e,["value","disabled"]);return Object(s.jsxs)("div",Object.assign({className:"c-game-input"},{children:[Object(s.jsx)(ge,{name:"winner",className:"c-game-input__players",choices:[{value:h.One,label:a.player1Name},{value:h.Two,label:a.player2Name}],value:t.winner,disabled:n,label:"Winner",onChange:this.handleChange,hideNative:!0,horizontal:!0,ref:this.focusTarget},void 0),Object(s.jsxs)("div",Object.assign({className:"c-game-input__points"},{children:[Object(s.jsx)(Y,{name:"points",value:t.points,min:1,disabled:n,onChange:this.handleChange},void 0),"\xa0 points"]}),void 0),Object(s.jsx)(ge,{name:"gin",value:t.gin,className:"c-game-input__gin",choices:[{value:y.None,label:"No Gin"},{value:y.Normal,label:"Gin"},{value:y.Super,label:"Super Gin"}],disabled:n,onChange:this.handleChange,horizontal:!0,hideNative:!0},void 0)]}),void 0)}}n(48);var xe=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n};const Ne=e=>{var{value:t}=e,n=xe(e,["value"]);return Object(s.jsxs)("div",Object.assign({className:E()("c-scorecolumn",n.className)},{children:[Object(s.jsxs)("div",Object.assign({className:"c-scorecolumn__header"},{children:[Object(s.jsx)("div",Object.assign({className:"c-scorecolumn__player"},{children:n.player1Name}),void 0),Object(s.jsx)("div",Object.assign({className:"c-scorecolumn__player"},{children:n.player2Name}),void 0)]}),void 0),t.games.map((e,t)=>Object(i.createElement)(_e,Object.assign({},e,{key:`game-${t}`}))),t.bonuses.map((e,t)=>Object(s.jsx)(Se,Object.assign({},e,{isFirst:0===t}),`bonus-${t}`))]}),void 0)},_e=({winner:e,gin:t,runningTotal:n})=>{const a=Object(s.jsxs)("div",Object.assign({className:"c-scorerow__winner","data-gin":t},{children:[n,t!==y.None&&Object(s.jsxs)("span",Object.assign({className:"c-scorerow__winner__gin__star"},{children:[" ",t===y.Normal&&"\u2605",t===y.Super&&"\u2605\u2605"]}),void 0)]}),"winner"),i=Object(s.jsx)("div",{className:"c-scorerow__loser"},"loser");return Object(s.jsx)("div",Object.assign({className:"c-scorerow"},{children:e===h.One?[a,i]:[i,a]}),void 0)},Se=e=>{const t=Object(s.jsxs)("div",Object.assign({className:"c-bonusrow__recipient"},{children:[Object(s.jsx)("span",Object.assign({className:"c-bonusrow__points"},{children:e.points}),void 0),Object(s.jsx)("span",Object.assign({className:"c-bonusrow__label"},{children:e.label}),void 0)]}),"winner"),n=Object(s.jsx)("div",{className:"c-bonusrow__loser"},"loser");return Object(s.jsx)("div",Object.assign({className:E()("c-bonusrow",{"c-bonusrow--first":e.isFirst})},{children:e.player===h.One?[t,n]:[n,t]}),void 0)};n(50);const Ce=({className:e,children:t,overflowX:n="auto",overflowY:a="auto"})=>Object(s.jsx)("div",Object.assign({className:E()("c-scroll-viewer",e),style:{overflowX:n,overflowY:a}},{children:t}),void 0);n(52),n(54);var Te=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n};const Pe=e=>{const{value:t}=e,n=Te(e,["value"]);return b(t)?Object(s.jsxs)(ke,Object.assign({},n,{finished:!0},{children:[Object(s.jsxs)("span",Object.assign({className:"c-set-summary--final__winner"},{children:[g(e,t.finalResult.winner)," won"]}),void 0),Object(s.jsx)("span",Object.assign({className:"c-set-summary--final__points"},{children:t.finalResult.points}),void 0)]}),void 0):Object(s.jsxs)(ke,Object.assign({},n,{children:[Object(s.jsxs)("div",Object.assign({className:"c-set-summary__player"},{children:[Object(s.jsx)("span",Object.assign({className:"c-set-summary__player-name"},{children:e.player1Name}),void 0),Object(s.jsx)("span",Object.assign({className:"c-set-summary__points"},{children:t.currentScores[h.One]}),void 0)]}),void 0),Object(s.jsxs)("div",Object.assign({className:"c-set-summary__player"},{children:[Object(s.jsx)("span",Object.assign({className:"c-set-summary__player-name"},{children:e.player2Name}),void 0),Object(s.jsx)("span",Object.assign({className:"c-set-summary__points"},{children:t.currentScores[h.Two]}),void 0)]}),void 0)]}),void 0)},ke=({className:e,onClick:t,finished:n,children:a})=>Object(s.jsx)("div",Object.assign({className:E()("c-set-summary",n?"c-set-summary--final":"c-set-summary--in-progress",e,{"c-set-summary--clickable":Boolean(t)}),onClick:t},{children:a}),void 0);class Ee extends i.PureComponent{render(){return Object(s.jsx)(A,Object.assign({activator:({openDrawer:e})=>Object(s.jsx)(Pe,Object.assign({},this.props,{onClick:e,className:"c-set-view"}),void 0)},{children:Object(s.jsx)(Ne,Object.assign({},this.props,{className:"c-set-view__score-column"}),void 0)}),void 0)}}var Re=n(9);n(58);const De=({layout:e,value:t,showDealer:n})=>{const a=Object(c.d)(ne);switch(e){case"stack":return Object(s.jsx)(Ge,{value:t,dealer:n?a:void 0},void 0);case"grid":return Object(s.jsx)(Ue,{value:t,dealer:n?a:void 0},void 0)}},Ge=({value:e,dealer:t})=>{const n=Object(c.d)(ee);return Object(s.jsxs)("div",Object.assign({className:"c-stats-viewer"},{children:[void 0!==t&&Object(s.jsxs)("div",{children:["Dealer: ",g(n,t)]},void 0),Le((e,t,n)=>Object(s.jsx)(Me,{title:e,value:t,formatter:n},void 0),e)]}),void 0)},Me=e=>{const t=Object(c.d)(ee);return Object(s.jsxs)("div",Object.assign({className:"c-share-chart"},{children:[Object(s.jsx)("h3",{children:e.title},void 0),g(t,h.One),":"," ",e.formatter(e.value[h.One]),Object(s.jsx)("br",{},void 0),g(t,h.Two),":"," ",e.formatter(e.value[h.Two]),Object(s.jsx)("br",{},void 0)]}),void 0)},Fe=e=>e%1===0?e.toString():e.toFixed(2),Ie=e=>{const t=e[y.Normal],n=e[y.Super],a=Object(s.jsxs)("span",Object.assign({style:{whiteSpace:"nowrap"}},{children:[t,"\u2605"]}),void 0),i=Object(s.jsxs)("span",Object.assign({style:{whiteSpace:"nowrap"}},{children:[n,"\u2605\u2605"]}),void 0);return t&&n?Object(s.jsxs)(s.Fragment,{children:[a," ",Object(s.jsx)("span",Object.assign({style:{opacity:.5}},{children:"|"}),void 0)," ",i]},void 0):t?a:n?i:0},Ue=({value:e,dealer:t})=>{const n=Object(c.d)(ee);return Object(s.jsxs)("table",Object.assign({className:"c-stats-viewer c-stats-viewer--grid"},{children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",Object.assign({className:"c-stats-viewer--grid__player"},{children:g(n,h.One)}),void 0),Object(s.jsx)("td",{children:void 0!==t&&Object(s.jsx)(Be,{dealer:t},void 0)},void 0),Object(s.jsx)("td",Object.assign({className:"c-stats-viewer--grid__player"},{children:g(n,h.Two)}),void 0)]},void 0)},void 0),Object(s.jsx)("tbody",{children:Le((e,t,n)=>Object(s.jsx)(We,{title:e,value:t,formatter:n},void 0),e)},void 0)]}),void 0)},We=e=>Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:e.formatter(e.value[h.One])},void 0),Object(s.jsx)("td",{children:e.title},void 0),Object(s.jsx)("td",{children:e.formatter(e.value[h.Two])},void 0)]},void 0),Le=(e,t)=>Object(s.jsxs)(s.Fragment,{children:[e("Wins",t.wins,Re.identity),e("Max Streak",t.maxStreak,Re.identity),e("Mean PPG",t.meanWinSize,Fe),e("Biggest Win",t.biggestWin,Re.identity),e("Gins",t.ginGames,Ie)]},void 0),Be=({dealer:e})=>{const t=Object(c.d)(se),n=Object(c.c)();return Object(s.jsxs)("div",Object.assign({className:E()("c-dealer-token",e===h.One?"c-dealer-token--p1":"c-dealer-token--p2"),onClick:t?void 0:()=>n(M.SetInitialDealer(f(e)))},{children:[Object(s.jsx)("span",Object.assign({className:"c-dealer-token__arrow c-dealer-token__arrow--p1"},{children:Object(s.jsx)(ze,{direction:"left"},void 0)}),void 0)," ","Dealer"," ",Object(s.jsx)("span",Object.assign({className:"c-dealer-token__arrow c-dealer-token__arrow--p2"},{children:Object(s.jsx)(ze,{direction:"right"},void 0)}),void 0)]}),void 0)},ze=({direction:e})=>Object(s.jsx)("svg",Object.assign({viewBox:"0 0 5 6",width:10,height:12},{children:Object(s.jsx)("path",{d:"M 0 0 L 5 3 L 0 6 Z",style:{fill:"var(--text-color)"},transform:"left"===e?"rotate(180 2.5 3)":void 0},void 0)}),void 0);n(60);const Ae=e=>Object(s.jsxs)("div",Object.assign({className:E()("c-match-result-viewer",E.a)},{children:[Object(s.jsxs)("div",Object.assign({className:"c-match-result-viewer__winner"},{children:[e.winner===h.One?e.player1Name:e.player2Name," ","wins!"]}),void 0),Object(s.jsxs)("div",Object.assign({className:"c-match-result-viewer__points"},{children:[Object(s.jsx)("span",Object.assign({className:"c-match-result-viewer__points-value"},{children:e.points}),void 0),"\xa0",Object(s.jsx)("span",Object.assign({className:"c-match-result-viewer__points-label"},{children:"points"}),void 0)]}),void 0),Object(s.jsx)("div",Object.assign({className:"c-match-result-viewer__actions"},{children:e.onNewMatch&&Object(s.jsx)(G,Object.assign({onClick:e.onNewMatch},{children:"Play again"}),void 0)}),void 0)]}),void 0);n(62);var Xe=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n};const Je=Object(i.forwardRef)((e,t)=>{const n=Object(i.useRef)(null),[a,r]=Object(i.useState)(ye.DEFAULT);return Object(i.useImperativeHandle)(t,()=>({focus:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.focus()}}),[]),Object(s.jsx)(X,Object.assign({className:"c-gameform",onSubmit:()=>{var t,s;w(a)&&(null===(t=e.onSubmitGame)||void 0===t||t.call(e,a),r(ye.DEFAULT),null===(s=n.current)||void 0===s||s.focus())},disableSubmit:e.disabled||!w(a),submitLabel:"Submit"},{children:Object(s.jsx)(we,{ref:n,player1Name:e.player1Name,player2Name:e.player2Name,disabled:e.disabled,value:a,onChange:e=>r(e)},void 0)}),void 0)}),$e=Object(ce.createSelector)(e=>e.games,e=>{const t=d(e),n=t.every(b)?m(t,e):void 0;return{games:e,sets:t,finalResult:n}}),He={onSubmitGame:M.FinishGame,onNewMatch:M.StartNewMatch},Ve=Object(c.b)(e=>({value:$e(e),players:ee(e)}),He)(e=>{var{players:t,value:n,readOnly:a}=e,r=Xe(e,["players","value","readOnly"]);const c=Object(i.useRef)(null),o=Object(i.useMemo)(()=>(e=>{const t=be(e);return{wins:t,meanWinSize:je(e,t),maxStreak:ue(e),biggestWin:Oe(e),ginGames:ve(e)}})(n.games),[n.games]),[l,d]=Object(i.useState)(!1),b=()=>{d(!1)},j=Object(s.jsx)(Je,Object.assign({ref:c},t,{onSubmitGame:e=>{var t;null===(t=r.onSubmitGame)||void 0===t||t.call(r,e),b()}}),void 0);return Object(s.jsxs)("div",Object.assign({className:E()("c-match-viewer",{"c-match-viewer--finished":Boolean(n.finalResult)})},{children:[Object(s.jsx)(le.a,Object.assign({minWidth:600},{children:Object(s.jsxs)(Ce,Object.assign({className:"c-match-viewer__main"},{children:[Object(s.jsx)("div",Object.assign({className:"c-match-viewer__sets"},{children:n.sets.map((e,n)=>Object(s.jsx)(Ne,Object.assign({},t,{value:e}),n))}),void 0),Object(s.jsx)(De,{layout:"stack",value:o,showDealer:!n.finalResult},void 0)]}),void 0)}),void 0),Object(s.jsx)(le.a,Object.assign({maxWidth:600},{children:Object(s.jsxs)(Ce,Object.assign({overflowX:"hidden"},{children:[n.sets.map((e,n)=>Object(s.jsx)(Ee,Object.assign({value:e},t),n)),Object(s.jsx)(De,{layout:"grid",value:o,showDealer:!n.finalResult},void 0)]}),void 0)}),void 0),n.finalResult&&Object(s.jsx)(Ae,Object.assign({},t,n.finalResult,{onNewMatch:r.onNewMatch}),void 0),!a&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(le.a,Object.assign({maxWidth:1e3},{children:[Object(s.jsx)(z,{},void 0),Object(s.jsx)(B,Object.assign({open:l,title:"Add game",onTitleClick:()=>{var e;d(!0),null===(e=c.current)||void 0===e||e.focus()},onDismiss:b,hideTitle:!!n.finalResult},{children:j}),void 0)]}),void 0),Object(s.jsx)(le.a,Object.assign({minWidth:1e3},{children:Object(s.jsxs)("div",Object.assign({className:"c-match-viewer__add-game"},{children:[Object(s.jsx)("h1",{children:"Add game"},void 0),j]}),void 0)}),void 0)]},void 0)]}),void 0)});n(64);const qe=e=>Object(s.jsxs)("div",Object.assign({className:"l-playing"},{children:[Object(s.jsx)(P,{},void 0),Object(s.jsx)(re,{},void 0),Object(s.jsx)(Ve,{},void 0)]}),void 0),Ye=(Object(o.b)(Object(o.a)(()=>window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),Object(l.b)()),Object(o.c)((e,t)=>{switch(t.type){case"RenamePlayers":{const{player1Name:n,player2Name:s}=t;return ae(Object.assign(Object.assign({},e),{player1Name:n,player2Name:s}))}case"FinishGame":return ae(Object.assign(Object.assign({},e),{games:[...e.games,t.result]}));case"UndoGame":return ae(Object.assign(Object.assign({},e),{games:e.games.slice(0,e.games.length-1)}));case"StartNewMatch":return ae(Object.assign(Object.assign({},e),{games:[]}));case"SetInitialDealer":return e.games.length?e:ae(Object.assign(Object.assign({},e),{initialDealer:t.dealer}));default:return e}},(()=>{const e=window.localStorage.getItem("reduxState");if(e)try{const n=JSON.parse(e);if(!(e=>"object"===typeof e&&"string"===typeof e.player1Name&&"string"===typeof e.player2Name&&"number"===typeof e.version)(n))return;try{return x(n)}catch(t){return void console.error(t)}}catch(t){return void console.error("Could not read state as JSON",t)}})()||S,Object(l.b)()));var Ke=class extends i.Component{render(){return Object(s.jsx)(c.a,Object.assign({store:Ye},{children:Object(s.jsx)(qe,{},void 0)}),void 0)}};const Qe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ze(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=(()=>{const t=e.installing;t&&(t.onstatechange=(()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}))})}).catch(e=>{console.error("Error during service worker registration:",e)})}a.render(Object(s.jsx)(Ke,{},void 0),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/ginscorer",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="/ginscorer/service-worker.js";Qe?(function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):Ze(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Ze(e)})}}()}],[[19,2,1]]]);
//# sourceMappingURL=main.589c7205.chunk.js.map