(this.webpackJsonpginscorer=this.webpackJsonpginscorer||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){},,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(6),a=n(1),r=n.n(a),c=n(3),i=n(11),l=n(7);n(30);const o=e=>{const[t,n]=u(e),[s,a]=u(e,1,[n]),[r]=u(e,2,[n,a]);return[t,s,r]},d=e=>Boolean(e.finalResult),u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const s={[p.One]:-1*t,[p.Two]:-1*t},a={[p.One]:0,[p.Two]:0},r=[],c=[];n.reverse();let i=n.pop();for(const[l,o]of e.entries()){if("number"===typeof i&&l>=i+1&&(s[p.One]=Math.max(-1*n.length,s[p.One]),s[p.Two]=Math.max(-1*n.length,s[p.Two]),i=n.pop()),s[o.winner]+=1,s[o.winner]<=0)continue;a[o.winner]+=o.points;const e=a[o.winner];if(r.push({...o,runningTotal:e}),e>=100){c.push({player:o.winner,points:100,label:"Going out"}),O.forEach((e=>{s[e]>0&&c.push({player:e,points:10*s[e],label:"Wins"})})),O.forEach((e=>{const t=r.filter(j(e)).reduce(((e,t)=>e+m(t.gin)),0);t&&c.push({player:e,points:t,label:"Gins"})})),s[p.Two]<=0&&c.push({player:p.One,points:e+c.filter((e=>e.player===p.One)).reduce(((e,t)=>{let{points:n}=t;return e+n}),0),label:"Blitz"}),s[p.One]<=0&&c.push({player:p.Two,points:e+c.filter((e=>e.player===p.Two)).reduce(((e,t)=>{let{points:n}=t;return e+n}),0),label:"Blitz"}),a[p.One]+=c.filter((e=>e.player===p.One)).reduce(((e,t)=>{let{points:n}=t;return e+n}),0),a[p.Two]+=c.filter((e=>e.player===p.Two)).reduce(((e,t)=>{let{points:n}=t;return e+n}),0);const t={winner:h(a),points:Math.abs(a[p.One]-a[p.Two])};return[{bonuses:c,finalResult:t,games:r},l]}}return[{bonuses:c,currentScores:a,games:r},void 0]},h=e=>e[p.One]>e[p.Two]?p.One:p.Two,m=e=>{switch(e){case x.None:return 0;case x.Normal:return 25;case x.Super:return 50}},j=e=>t=>t.winner===e,b=(e,t)=>{const n={[p.One]:0,[p.Two]:0};e.forEach((e=>n[e.finalResult.winner]+=e.finalResult.points));const s=h(n),a=t.every(j(s));return{winner:s,isHollywood:a,points:a?2*n[s]:n[s]-n[w(s)]}};let p;!function(e){e[e.One=1]="One",e[e.Two=2]="Two"}(p||(p={}));const O=[p.One,p.Two],v=(e,t)=>t===p.One?e.player1Name:e.player2Name,w=e=>e===p.One?p.Two:p.One;let x;!function(e){e.None="none",e.Normal="normal",e.Super="super"}(x||(x={}));const f=e=>null!==e.winner&&"object"===typeof e&&"number"===typeof e.points&&"string"===typeof e.gin&&void 0!==e.winner,g=e=>{switch(e.version){case 2:return e;case 1:return S(e);default:throw new y(e)}};class N extends Error{constructor(e,t){super(e),this.state=t}}class y extends N{constructor(e){super("Unknown state version '".concat(e.version,"'"),e),this.version=void 0,this.version=e.version}}const _={version:2,player1Name:"Player 1",player2Name:"Player 2",games:[],initialDealer:p.One},S=e=>({...e,version:2,initialDealer:p.One}),C="reduxState",T=e=>(window.localStorage.setItem(C,JSON.stringify(e)),Promise.resolve());n(31);var k=n(0);const R=()=>Object(k.jsx)("header",{className:"c-app-header",children:Object(k.jsx)("h1",{children:"Gin Scorer"})});var E=n(2),D=n.n(E);const G=e=>{e.stopPropagation(),e.preventDefault()};n(33);const M=Object(a.forwardRef)(((e,t)=>{let{primary:n,...s}=e;return Object(k.jsx)("button",{...s,ref:t,className:D()("c-button",n&&"c-button--primary",s.className),onClick:e=>{!e.button&&s.onClick&&(G(e),s.confirmation&&!window.confirm(s.confirmation)||s.onClick())}})})),F={UndoGame:()=>({type:"UndoGame"}),RenamePlayers:e=>({...e,type:"RenamePlayers"}),FinishGame:e=>({type:"FinishGame",result:e}),StartNewMatch:()=>({type:"StartNewMatch"}),SetInitialDealer:e=>({type:"SetInitialDealer",dealer:e})};var P=n(51),W=n(19),U=n(17);const L=e=>{var t;null===(t=e.current)||void 0===t||t.focus()};n(34);const B=e=>{const t=Object(a.useRef)(null),n=Object(a.useRef)(null),[r,c]=Object(a.useState)(window.innerHeight);return Object(a.useEffect)((()=>{if(e.hideTitle||!e.title)return;const t=()=>c(window.innerHeight);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[e.title,e.hideTitle]),Object(a.useLayoutEffect)((()=>{var e;if(!n.current)return;if("standalone"in navigator&&navigator.standalone)return;const{bottom:s}=n.current.getBoundingClientRect(),a=Math.max(0,s-r);null===(e=t.current)||void 0===e||e.style.setProperty("--safari-correction","".concat(a,"px"))}),[r]),Object(s.createPortal)(Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(P.a,{in:e.open,timeout:125,classNames:"c-drawer__backdrop",appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Object(k.jsx)("div",{onClick:t=>{var n;0===t.button&&(null===(n=e.onDismiss)||void 0===n||n.call(e))},className:"c-drawer__backdrop"})}),Object(k.jsx)(P.a,{in:e.open,classNames:"c-drawer",timeout:125,onExit:()=>L(n),onEntered:e.onEntered,appear:!0,children:Object(k.jsxs)("div",{ref:t,className:D()("c-drawer",{"c-drawer--has-title":Boolean(e.title)&&!e.hideTitle}),onKeyDown:t=>{t.key===U.a.Escape&&e.onDismiss&&(G(t),e.onDismiss())},role:"dialog",children:[e.title&&Object(k.jsx)(M,{ref:n,className:"c-drawer__title",onClick:e.onTitleClick,children:Object(k.jsx)("span",{className:"c-drawer__title__text",children:e.title})}),Object(k.jsx)(W.a,{in:e.open,timeout:125,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:e.children})]})})]}),document.body)},I=()=>Object(k.jsx)("div",{className:"c-drawer-title-placeholder"}),z=e=>{let{activator:t,children:n}=e;const[s,r]=Object(a.useState)(!1);return Object(k.jsxs)(k.Fragment,{children:[t({openDrawer:()=>r(!0)}),Object(k.jsx)(B,{open:s,onDismiss:()=>r(!1),children:n})]})},A=e=>Object(k.jsxs)("form",{style:e.style,className:e.className,onSubmit:t=>{G(t),e.disableSubmit||e.onSubmit()},children:[e.children,e.submitLabel&&Object(k.jsx)(M,{primary:!0,disabled:e.disableSubmit,type:"submit",children:e.submitLabel})]}),X=e=>(t,n)=>{const{value:s,onChange:a,disabled:r,name:c}=e.props;r||a&&a({...s,[n]:t},c)};n(15);const J=Object(a.forwardRef)(((e,t)=>Object(k.jsx)("input",{ref:t,...e,className:D()("c-base-input",e.className)}))),H=Object(a.forwardRef)(((e,t)=>{let{onChange:n,label:s,className:a,...r}=e;return Object(k.jsxs)("label",{className:D()("c-input",a),children:[s&&Object(k.jsx)("div",{className:"c-input-label",children:s}),Object(k.jsx)(J,{...r,ref:t,onChange:e=>n(e.target.value,r.name)})]})})),V=e=>{const{value:t,className:n,...s}=e;return Object(k.jsx)(J,{...s,className:D()("c-number-input",n),type:"number",value:null!==t?t.toString():"",onChange:t=>{e.onChange(q(t.target.value),e.name)}})},q=e=>""===e?null:Number.parseInt(e,10);n(35);class Y extends a.Component{constructor(){super(...arguments),this.handleChange=X(this),this.focusTarget=Object(a.createRef)(),this.focus=()=>L(this.focusTarget)}render(){const{value:e,disabled:t}=this.props;return Object(k.jsxs)("div",{className:"c-players-input",children:[Object(k.jsx)(H,{ref:this.focusTarget,label:"Player 1",name:"player1Name",value:e.player1Name,disabled:t,onChange:this.handleChange,required:!0,maxLength:15}),Object(k.jsx)(H,{label:"Player 2",name:"player2Name",value:e.player2Name,disabled:t,onChange:this.handleChange,required:!0,maxLength:15})]})}}const K=e=>{const[t,n]=Object(a.useState)(!1),[s,r]=Object(a.useState)(void 0),c=Object(a.useRef)(null),i=Object(a.useRef)(null),l=()=>{var e;n(!1),r(void 0),null===(e=c.current)||void 0===e||e.focus()};return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(M,{ref:c,onClick:()=>n(!0),children:"Rename Players"}),Object(k.jsx)(B,{title:t?"Rename Players":void 0,open:t,onDismiss:l,onEntered:()=>{var e;return null===(e=i.current)||void 0===e?void 0:e.focus()},children:Object(k.jsxs)(A,{style:{marginLeft:10,marginRight:10,maxWidth:"30em",display:"flex",flexDirection:"column"},onSubmit:()=>{s&&(e.onSubmit(s),l())},children:[Object(k.jsx)(Y,{ref:i,value:null!==s&&void 0!==s?s:e.defaultValue,onChange:e=>r(e)}),Object(k.jsx)("div",{style:{height:20}}),Object(k.jsx)(M,{primary:!0,type:"submit",children:"Update"})]})})]})},Z=e=>{let{player1Name:t,player2Name:n}=e;return{player1Name:t,player2Name:n}},$=e=>{let{games:t}=e;return Boolean(t.length)},Q=e=>{let{games:t,initialDealer:n}=e;return t.length%2===0?n:w(n)},ee=e=>Boolean(e.games.length),te=e=>Object(l.c)(e,l.a.run(T,{args:[e]})),ne={onStartNewMatch:F.StartNewMatch,onRenamePlayers:F.RenamePlayers,onUndoGame:F.UndoGame},se=Object(c.b)((e=>({playerNames:Z(e),canUndo:$(e),hasMatchStarted:ee(e)})),ne)((e=>Object(k.jsxs)("div",{className:"c-command-bar",children:[Object(k.jsx)(M,{onClick:e.onUndoGame,disabled:!e.canUndo,children:"Undo Last Game"}),Object(k.jsx)(M,{onClick:e.onStartNewMatch,disabled:!e.hasMatchStarted,confirmation:"Are you sure you want to start a new match?",children:"New Match"}),Object(k.jsx)(K,{defaultValue:e.playerNames,onSubmit:e.onRenamePlayers})]})));var ae=n(18),re=n(8),ce=n.n(re);const ie=()=>({[p.One]:0,[p.Two]:0}),le=e=>e.reduce(((e,t)=>(e[t.winner]+=1,e)),ie()),oe=(e,t)=>{const n=e.reduce(((e,t)=>(e[t.winner]+=t.points,e)),ie());return t[p.One]&&(n[p.One]/=t[p.One]),t[p.Two]&&(n[p.Two]/=t[p.Two]),n},de=e=>{const t=ie(),n=ie();for(const s of e)t[s.winner]+=1,t[w(s.winner)]=0,t[s.winner]>n[s.winner]&&(n[s.winner]=t[s.winner]);return n},ue=e=>e.reduce(((e,t)=>(e[t.winner]=Math.max(e[t.winner],t.points),e)),ie()),he=e=>e.reduce(((e,t)=>(t.gin!==x.None&&(e[t.winner][t.gin]+=1),e)),{[p.One]:{[x.Normal]:0,[x.Super]:0},[p.Two]:{[x.Normal]:0,[x.Super]:0}});n(36);class me extends a.Component{constructor(){var e;super(...arguments),this.root=Object(a.createRef)(),this.hasFocus=(e=this.root,()=>{var t,n;return null!==(t=null===(n=e.current)||void 0===n?void 0:n.contains(document.activeElement))&&void 0!==t&&t}),this.focus=()=>L(this.root),this.handleFocusChange=()=>this.forceUpdate(),this.handleChange=()=>{var e,t;null===(e=(t=this.props).onChange)||void 0===e||e.call(t,this.props.value,this.props.name)}}render(){const{className:e,children:t,value:n,label:s,...a}=this.props;return Object(k.jsxs)("label",{ref:this.root,className:D()("c-radio",e,{"c-radio--checked":a.selected,"c-radio--disabled":a.disabled,"c-radio--nonative":a.hideNative,"c-radio--has-focus":this.hasFocus()}),children:[Object(k.jsx)("input",{name:a.name,disabled:a.disabled,checked:a.selected,onChange:this.handleChange,value:n.toString(),type:"radio",onFocus:this.handleFocusChange,onBlur:this.handleFocusChange}),s]})}}n(37);class je extends r.a.Component{constructor(){super(...arguments),this.first=r.a.createRef(),this.focus=()=>L(this.first)}render(){const{className:e,name:t,...n}=this.props;return Object(k.jsxs)("div",{className:D()("c-radio-group",e,{"c-radio-group--horizontal":n.horizontal,"c-radio-group--hide-native":n.hideNative}),children:[n.label&&Object(k.jsx)("span",{className:"c-radio-group__label",children:n.label}),n.choices.map(((e,s)=>Object(a.createElement)(me,{...e,key:e.value,ref:0===s?this.first:void 0,name:t,disabled:n.disabled,hideNative:n.hideNative,selected:n.value===e.value,onChange:n.onChange})))]})}}n(38);const be={DEFAULT:{winner:p.One,points:null,gin:x.None}};class pe extends a.Component{constructor(){super(...arguments),this.focusTarget=Object(a.createRef)(),this.handleChange=X(this),this.focus=()=>L(this.focusTarget)}render(){const{value:e,disabled:t,...n}=this.props;return Object(k.jsxs)("div",{className:"c-game-input",children:[Object(k.jsx)(je,{name:"winner",className:"c-game-input__players",choices:[{value:p.One,label:n.player1Name},{value:p.Two,label:n.player2Name}],value:e.winner,disabled:t,label:"Winner",onChange:this.handleChange,hideNative:!0,horizontal:!0,ref:this.focusTarget}),Object(k.jsxs)("div",{className:"c-game-input__points",children:[Object(k.jsx)(V,{name:"points",value:e.points,min:1,disabled:t,onChange:this.handleChange}),"\xa0 points"]}),Object(k.jsx)(je,{name:"gin",value:e.gin,className:"c-game-input__gin",choices:[{value:x.None,label:"No Gin"},{value:x.Normal,label:"Gin"},{value:x.Super,label:"Super Gin"}],disabled:t,onChange:this.handleChange,horizontal:!0,hideNative:!0})]})}}n(39);const Oe=e=>{let{value:t,...n}=e;return Object(k.jsxs)("div",{className:D()("c-scorecolumn",n.className),children:[Object(k.jsxs)("div",{className:"c-scorecolumn__header",children:[Object(k.jsx)("div",{className:"c-scorecolumn__player",children:n.player1Name}),Object(k.jsx)("div",{className:"c-scorecolumn__player",children:n.player2Name})]}),t.games.map(((e,t)=>Object(a.createElement)(ve,{...e,key:"game-".concat(t)}))),t.bonuses.map(((e,t)=>Object(k.jsx)(we,{...e,isFirst:0===t},"bonus-".concat(t))))]})},ve=e=>{let{winner:t,gin:n,runningTotal:s}=e;const a=Object(k.jsxs)("div",{className:"c-scorerow__winner","data-gin":n,children:[s,n!==x.None&&Object(k.jsxs)("span",{className:"c-scorerow__winner__gin__star",children:[" ",n===x.Normal&&"\u2605",n===x.Super&&"\u2605\u2605"]})]},"winner"),r=Object(k.jsx)("div",{className:"c-scorerow__loser"},"loser");return Object(k.jsx)("div",{className:"c-scorerow",children:t===p.One?[a,r]:[r,a]})},we=e=>{const t=Object(k.jsxs)("div",{className:"c-bonusrow__recipient",children:[Object(k.jsx)("span",{className:"c-bonusrow__points",children:e.points}),Object(k.jsx)("span",{className:"c-bonusrow__label",children:e.label})]},"winner"),n=Object(k.jsx)("div",{className:"c-bonusrow__loser"},"loser");return Object(k.jsx)("div",{className:D()("c-bonusrow",{"c-bonusrow--first":e.isFirst}),children:e.player===p.One?[t,n]:[n,t]})};n(40);const xe=e=>{let{className:t,children:n,overflowX:s="auto",overflowY:a="auto"}=e;return Object(k.jsx)("div",{className:D()("c-scroll-viewer",t),style:{overflowX:s,overflowY:a},children:n})};n(41),n(42);const fe=e=>{const{value:t,...n}=e;return d(t)?Object(k.jsxs)(ge,{...n,finished:!0,children:[Object(k.jsxs)("span",{className:"c-set-summary--final__winner",children:[v(e,t.finalResult.winner)," won"]}),Object(k.jsx)("span",{className:"c-set-summary--final__points",children:t.finalResult.points})]}):Object(k.jsxs)(ge,{...n,children:[Object(k.jsxs)("div",{className:"c-set-summary__player",children:[Object(k.jsx)("span",{className:"c-set-summary__player-name",children:e.player1Name}),Object(k.jsx)("span",{className:"c-set-summary__points",children:t.currentScores[p.One]})]}),Object(k.jsxs)("div",{className:"c-set-summary__player",children:[Object(k.jsx)("span",{className:"c-set-summary__player-name",children:e.player2Name}),Object(k.jsx)("span",{className:"c-set-summary__points",children:t.currentScores[p.Two]})]})]})},ge=e=>{let{className:t,onClick:n,finished:s,children:a}=e;return Object(k.jsx)("div",{className:D()("c-set-summary",s?"c-set-summary--final":"c-set-summary--in-progress",t,{"c-set-summary--clickable":Boolean(n)}),onClick:n,children:a})};class Ne extends a.PureComponent{render(){return Object(k.jsx)(z,{activator:e=>{let{openDrawer:t}=e;return Object(k.jsx)(fe,{...this.props,onClick:t,className:"c-set-view"})},children:Object(k.jsx)(Oe,{...this.props,className:"c-set-view__score-column"})})}}var ye=n(10);n(45);const _e=e=>{let{layout:t,value:n,showDealer:s}=e;const a=Object(c.d)(Q);switch(t){case"stack":return Object(k.jsx)(Se,{value:n,dealer:s?a:void 0});case"grid":return Object(k.jsx)(Re,{value:n,dealer:s?a:void 0})}},Se=e=>{let{value:t,dealer:n}=e;const s=Object(c.d)(Z);return Object(k.jsxs)("div",{className:"c-stats-viewer",children:[void 0!==n&&Object(k.jsxs)("div",{children:["Dealer: ",v(s,n)]}),De(((e,t,n)=>Object(k.jsx)(Ce,{title:e,value:t,formatter:n})),t)]})},Ce=e=>{const t=Object(c.d)(Z);return Object(k.jsxs)("div",{className:"c-share-chart",children:[Object(k.jsx)("h3",{children:e.title}),v(t,p.One),":"," ",e.formatter(e.value[p.One]),Object(k.jsx)("br",{}),v(t,p.Two),":"," ",e.formatter(e.value[p.Two]),Object(k.jsx)("br",{})]})},Te=e=>e%1===0?e.toString():e.toFixed(2),ke=e=>{const t=e[x.Normal],n=e[x.Super],s=Object(k.jsxs)("span",{style:{whiteSpace:"nowrap"},children:[t,"\u2605"]}),a=Object(k.jsxs)("span",{style:{whiteSpace:"nowrap"},children:[n,"\u2605\u2605"]});return t&&n?Object(k.jsxs)(k.Fragment,{children:[s," ",Object(k.jsx)("span",{style:{opacity:.5},children:"|"})," ",a]}):t?s:n?a:0},Re=e=>{let{value:t,dealer:n}=e;const s=Object(c.d)(Z);return Object(k.jsxs)("table",{className:"c-stats-viewer c-stats-viewer--grid",children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{className:"c-stats-viewer--grid__player",children:v(s,p.One)}),Object(k.jsx)("td",{children:void 0!==n&&Object(k.jsx)(Ge,{dealer:n})}),Object(k.jsx)("td",{className:"c-stats-viewer--grid__player",children:v(s,p.Two)})]})}),Object(k.jsx)("tbody",{children:De(((e,t,n)=>Object(k.jsx)(Ee,{title:e,value:t,formatter:n})),t)})]})},Ee=e=>Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:e.formatter(e.value[p.One])}),Object(k.jsx)("td",{children:e.title}),Object(k.jsx)("td",{children:e.formatter(e.value[p.Two])})]}),De=(e,t)=>Object(k.jsxs)(k.Fragment,{children:[e("Wins",t.wins,ye.identity),e("Max Streak",t.maxStreak,ye.identity),e("Mean PPG",t.meanWinSize,Te),e("Biggest Win",t.biggestWin,ye.identity),e("Gins",t.ginGames,ke)]}),Ge=e=>{let{dealer:t}=e;const n=Object(c.d)(ee),s=Object(c.c)();return Object(k.jsxs)("div",{className:D()("c-dealer-token",t===p.One?"c-dealer-token--p1":"c-dealer-token--p2"),onClick:n?void 0:()=>s(F.SetInitialDealer(w(t))),children:[Object(k.jsx)("span",{className:"c-dealer-token__arrow c-dealer-token__arrow--p1",children:Object(k.jsx)(Me,{direction:"left"})})," ","Dealer"," ",Object(k.jsx)("span",{className:"c-dealer-token__arrow c-dealer-token__arrow--p2",children:Object(k.jsx)(Me,{direction:"right"})})]})},Me=e=>{let{direction:t}=e;return Object(k.jsx)("svg",{viewBox:"0 0 5 6",width:10,height:12,children:Object(k.jsx)("path",{d:"M 0 0 L 5 3 L 0 6 Z",style:{fill:"var(--text-color)"},transform:"left"===t?"rotate(180 2.5 3)":void 0})})};n(46);const Fe=e=>Object(k.jsxs)("div",{className:D()("c-match-result-viewer",D.a),children:[Object(k.jsxs)("div",{className:"c-match-result-viewer__winner",children:[e.winner===p.One?e.player1Name:e.player2Name," ","wins!"]}),Object(k.jsxs)("div",{className:"c-match-result-viewer__points",children:[Object(k.jsx)("span",{className:"c-match-result-viewer__points-value",children:e.points}),"\xa0",Object(k.jsx)("span",{className:"c-match-result-viewer__points-label",children:"points"})]}),Object(k.jsx)("div",{className:"c-match-result-viewer__actions",children:e.onNewMatch&&Object(k.jsx)(M,{onClick:e.onNewMatch,children:"Play again"})})]});n(47);const Pe=Object(a.forwardRef)(((e,t)=>{const n=Object(a.useRef)(null),[s,r]=Object(a.useState)(be.DEFAULT);return Object(a.useImperativeHandle)(t,(()=>({focus:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.focus()}})),[]),Object(k.jsx)(A,{className:"c-gameform",onSubmit:()=>{var t,a;f(s)&&(null===(t=e.onSubmitGame)||void 0===t||t.call(e,s),r(be.DEFAULT),null===(a=n.current)||void 0===a||a.focus())},disableSubmit:e.disabled||!f(s),submitLabel:"Submit",children:Object(k.jsx)(pe,{ref:n,player1Name:e.player1Name,player2Name:e.player2Name,disabled:e.disabled,value:s,onChange:e=>r(e)})})})),We=Object(ae.createSelector)((e=>e.games),(e=>{const t=o(e),n=t.every(d)?b(t,e):void 0;return{games:e,sets:t,finalResult:n}})),Ue={onSubmitGame:F.FinishGame,onNewMatch:F.StartNewMatch},Le=Object(c.b)((e=>({value:We(e),players:Z(e)})),Ue)((e=>{let{players:t,value:n,readOnly:s,...r}=e;const c=Object(a.useRef)(null),i=Object(a.useMemo)((()=>(e=>{const t=le(e);return{wins:t,meanWinSize:oe(e,t),maxStreak:de(e),biggestWin:ue(e),ginGames:he(e)}})(n.games)),[n.games]),[l,o]=Object(a.useState)(!1),d=()=>{o(!1)},u=Object(k.jsx)(Pe,{ref:c,...t,onSubmitGame:e=>{var t;null===(t=r.onSubmitGame)||void 0===t||t.call(r,e),d()}});return Object(k.jsxs)("div",{className:D()("c-match-viewer",{"c-match-viewer--finished":Boolean(n.finalResult)}),children:[Object(k.jsx)(ce.a,{minWidth:600,children:Object(k.jsxs)(xe,{className:"c-match-viewer__main",children:[Object(k.jsx)("div",{className:"c-match-viewer__sets",children:n.sets.map(((e,n)=>Object(k.jsx)(Oe,{...t,value:e},n)))}),Object(k.jsx)(_e,{layout:"stack",value:i,showDealer:!n.finalResult})]})}),Object(k.jsx)(ce.a,{maxWidth:600,children:Object(k.jsxs)(xe,{overflowX:"hidden",children:[n.sets.map(((e,n)=>Object(k.jsx)(Ne,{value:e,...t},n))),Object(k.jsx)(_e,{layout:"grid",value:i,showDealer:!n.finalResult})]})}),n.finalResult&&Object(k.jsx)(Fe,{...t,...n.finalResult,onNewMatch:r.onNewMatch}),!s&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(ce.a,{maxWidth:1e3,children:[Object(k.jsx)(I,{}),Object(k.jsx)(B,{open:l,title:"Add game",onTitleClick:()=>{var e;o(!0),null===(e=c.current)||void 0===e||e.focus()},onDismiss:d,hideTitle:!!n.finalResult,children:u})]}),Object(k.jsx)(ce.a,{minWidth:1e3,children:Object(k.jsxs)("div",{className:"c-match-viewer__add-game",children:[Object(k.jsx)("h1",{children:"Add game"}),u]})})]})]})}));n(48);const Be=e=>Object(k.jsxs)("div",{className:"l-playing",children:[Object(k.jsx)(R,{}),Object(k.jsx)(se,{}),Object(k.jsx)(Le,{})]}),Ie=(Object(i.b)(Object(i.a)((()=>window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),Object(l.b)()),Object(i.c)(((e,t)=>{switch(t.type){case"RenamePlayers":{const{player1Name:n,player2Name:s}=t;return te({...e,player1Name:n,player2Name:s})}case"FinishGame":return te({...e,games:[...e.games,t.result]});case"UndoGame":return te({...e,games:e.games.slice(0,e.games.length-1)});case"StartNewMatch":return te({...e,games:[]});case"SetInitialDealer":return e.games.length?e:te({...e,initialDealer:t.dealer});default:return e}}),(()=>{const e=window.localStorage.getItem(C);var t;if(e)try{const s=JSON.parse(e);if("object"!==typeof(t=s)||"string"!==typeof t.player1Name||"string"!==typeof t.player2Name||"number"!==typeof t.version)return;try{return g(s)}catch(n){return void console.error(n)}}catch(n){return void console.error("Could not read state as JSON",n)}})()||_,Object(l.b)()));class ze extends a.Component{render(){return Object(k.jsx)(c.a,{store:Ie,children:Object(k.jsx)(Be,{})})}}var Ae=ze;const Xe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Je(e,t){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((e=>{console.error("Error during service worker registration:",e)}))}s.render(Object(k.jsx)(Ae,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/ginscorer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t="".concat("/ginscorer","/service-worker.js");Xe?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((n=>{const s=n.headers.get("content-type");404===n.status||null!=s&&-1===s.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):Je(e,t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Je(t,e)}))}}()}],[[49,1,2]]]);
//# sourceMappingURL=main.a9f71981.chunk.js.map